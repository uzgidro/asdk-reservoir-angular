<div class="grid grid-cols-6 grid-rows-3 h-full w-full gap-4">
  <!-- Chart with buttons -->
  <app-card-wrapper class="col-span-5 row-span-2">
    <div *ngIf="category == 'income'" [id]="id" slot="body" class="flex flex-1"></div>
  </app-card-wrapper>
  <!-- /Chart with buttons -->

  <!-- Year select -->
  <app-card-wrapper class="row-span-2">
    <div slot="body" class="overflow-y-auto">
      <table>
        <thead>
        <tr>
          <th>
            <input type="checkbox" [checked]="isYearsChecked(years)" class="w-4 h-4 mr-2 mt-2"
                   (click)="toggleYears(years)">
            Yil
          </th>
          <th>Suv kelishi, mln.m³</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of years" (click)="yearSelect(item.year)">
          <td
            [ngStyle]="{'background-color': getColor(item)}"
            [ngClass]="{
    'min': min?.year == item.year,
    'max': max?.year == item.year,
    'past': past?.year == item.year,
    'current': current?.year == item.year,
    }"
          >
            {{ item.year }}
          </td>
          <td
            [ngStyle]="{'background-color': getColor(item)}"
            [ngClass]="{
     'min': min?.year == item.year,
     'max': max?.year == item.year,
     'past': past?.year == item.year,
     'current': current?.year == item.year,
     }">
            {{ item.value | number: '.0-0' }}
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </app-card-wrapper>
  <!-- /Year select -->

  <!-- Info table -->
  <app-card-wrapper class="col-span-5">
    <div slot="body" class="overflow-y-auto">
      <table>
        <thead>
        <tr>
          <th rowspan="2">Yillar</th>
          <th colspan="12">Oylar, mln.m³</th>
          <th rowspan="2">O'rtacha kelishi, m³/s</th>
          <th rowspan="2">Yillik kelishi, mln.m³</th>
          <th rowspan="2">O'rtacha ko'rsatkichga kelsak, %</th>
        </tr>
        <tr>
          <th>Yan.</th>
          <th>Fev.</th>
          <th>Mart</th>
          <th>Apr.</th>
          <th>May</th>
          <th>Iyun</th>
          <th>Iyul</th>
          <th>Avg.</th>
          <th>Sen.</th>
          <th>Okt.</th>
          <th>Noy.</th>
          <th>Dek.</th>
        </tr>
        </thead>
        <tbody *ngIf="avg">
        <tr
          *ngIf="startYear && endYear && avg.display"
          (click)="changeVisibility(avg.id)"
          [ngStyle]="{'background-color': 'oklch(0.546 0.245 262.881)'}">
          <td
            *ngIf="startYear && endYear" class="text-sm p-1">
            O'rtacha ko'p yillik
          </td>
          <td
            *ngFor="let val of avg.byMonth">
            {{ val | number: '.0-0' }}
          </td>
          <td>{{ (avg.value / mSecondsInDay / 360) | number: '.0-0' }}</td>
          <td>{{ (avg.value) | number: '.0-0' }}</td>
          <td>100</td>
        </tr>
        <tr
          *ngIf="max && max.display"
          (click)="changeVisibility(max.id)"
          [ngStyle]="{'background-color': 'oklch(0.627 0.194 149.214)'}">
          <td class="p-1">
            Maksimal
          </td>
          <td
            *ngFor="let val of max.byMonth">
            {{ val | number: '.0-0' }}
          </td>
          <td>
            {{ (max.value / mSecondsInDay / 360) | number: '.0-0' }}
          </td>
          <td>{{ (max.value) | number: '.0-0' }}</td>
          <td>{{ (max.value * 100 / avg.value) | number: '.0-0' }}</td>
        </tr>
        <tr
          *ngIf="min && min.display"
          (click)="changeVisibility(min.id)"
          [ngStyle]="{'background-color': 'oklch(0.586 0.253 17.585)'}">
          <td class="p-1">
            Minimal
          </td>
          <td
            *ngFor="let val of min.byMonth">
            {{ val | number: '.0-0' }}
          </td>
          <td>
            {{ (min.value / mSecondsInDay / 360) | number: '.0-0' }}
          </td>
          <td>{{ (min.value) | number: '.0-0' }}</td>
          <td>{{ (min.value * 100 / avg.value) | number: '.0-0' }}</td>
        </tr>
        <tr
          *ngIf="tenAvg && tenAvg.display"
          (click)="changeVisibility(tenAvg.id)"
          [ngStyle]="{'background-color': 'oklch(0.609 0.126 221.723)'}">
          <td>O'rtacha 10 yil</td>
          <td
            *ngFor="let val of tenAvg.byMonth">
            {{ val | number: '.0-0' }}
          </td>
          <td>
            {{ (tenAvg.value / mSecondsInDay / 360) | number: '.0-0' }}
          </td>
          <td>
            {{ (tenAvg.value) | number: '.0-0' }}
          </td>
          <td>
            {{ (tenAvg.value * 100 / avg.value) | number: '.0-0' }}
          </td>
        </tr>
        <tr
          *ngIf="past && past.display"
          (click)="changeVisibility(past.id)"
          [ngStyle]="{'background-color': 'oklch(0.666 0.179 58.318)'}">
          <td>O'tgan yil o'rtacha</td>
          <td *ngFor="let val of past.byMonth">{{ val | number: '.0-0' }}</td>
          <td>{{ (past.value / mSecondsInDay / 360) | number: '.0-0' }}</td>
          <td>{{ (past.value) | number: '.0-0' }}</td>
          <td>{{ (past.value * 100 / avg.value) | number: '.0-0' }}</td>
        </tr>
        <tr
          *ngIf="current && current.display"
          (click)="changeVisibility(current.id)"
          [ngStyle]="{'background-color': 'oklch(0.558 0.288 302.321)'}">
          <td>{{ current.year }}</td>
          <td
            *ngFor="let val of current.byMonth">
            {{ val | number: '.0-0' }}
          </td>
          <td
            *ngFor="let _ of incomeChartLabels.slice(current.byMonth.length)">
          </td>
          <td>
            {{ (current.value / mSecondsInDay / 360) | number: '.0-0' }}
          </td>
          <td>
            {{ (current.value) | number: '.0-0' }}
          </td>
          <td>{{ (current.value * 100 / avg.value) | number: '.0-0' }}</td>
        </tr>
        <tr
          *ngFor="let item of selected"
          (click)="changeVisibility(item.id)"
          [ngStyle]="{'background-color': item.color}">
          <td>{{ item.year }}</td>
          <td
            *ngFor="let val of item.byMonth">
            {{ val | number: '.0-0' }}
          </td>
          <td>
            {{ (item.value / mSecondsInDay / 360) | number: '.0-0' }}
          </td>
          <td>
            {{ (item.value) | number: '.0-0' }}
          </td>
          <td>
            {{ (item.value * 100 / avg.value) | number: '.0-0' }}
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </app-card-wrapper>
  <!-- / Info table -->

  <!-- Additional table -->
  <app-card-wrapper>
    <div slot="body" class="overflow-y-auto">
      <table>
        <thead>
        <tr>
          <th>Yil</th>
          <th>Yillik kelishi, mln.m³</th>
        </tr>
        </thead>
        <tbody *ngIf="avg">
        <tr
          *ngIf="startYear && endYear"
          (click)="changeVisibility(avg.id) ">
          <td [ngClass]="{
         'bg-blue-600': avg.display,
         'text-blue-600': !avg.display}">
            O'rtacha ko'p yillik
          </td>
          <td
          [ngClass]="{
         'bg-blue-600': avg.display,
         'text-blue-600': !avg.display}">{{ (avg.value) | number: '.0-0' }}</td>
        </tr>
        <tr *ngIf="tenAvg" (click)="changeVisibility(tenAvg.id)">
          <td
            [ngClass]="{
          'bg-cyan-600': tenAvg.display,
          'text-cyan-600': !tenAvg.display}">O'rtacha 10 yil</td>
          <td
            [ngClass]="{
          'bg-cyan-600': tenAvg.display,
          'text-cyan-600': !tenAvg.display}">{{ (tenAvg.value) | number: '.0-0' }}</td>
        </tr>
        <tr
          *ngIf="max"
          (click)="changeVisibility(max.id)">
          <td
          [ngClass]="{
          'bg-green-600': max.display,
          'text-green-600':!max.display}">Maksimal</td>
          <td
          [ngClass]="{
          'bg-green-600': max.display,
          'text-green-600':!max.display}">{{ (max.value) | number: '.0-0' }}</td>
        </tr>
        <tr
          *ngIf="min"
          (click)="changeVisibility(min.id)">
          <td
          [ngClass]="{
         'bg-red-600': min.display,
         'text-red-600':!min.display}">Minimal</td>
          <td
          [ngClass]="{
         'bg-red-600': min.display,
         'text-red-600':!min.display}">{{ (min.value) | number: '.0-0' }}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </app-card-wrapper>
  <!-- / Additional table -->
</div>
