<div class="grid grid-cols-6 h-full gap-6 pb-8">
  <!-- Chart with buttons -->
  <div class="flex flex-col col-span-5 justify-start">
    <div [id]="id" class="w-full flex flex-1"></div>
<!--    <canvas *ngIf="category == 'income'"-->
<!--            baseChart-->
<!--            [datasets]="incomeChart"-->
<!--            [labels]="incomeChartLabels"-->
<!--            [options]="chartOptions"-->
<!--            [type]="'line'"-->
<!--    >-->
<!--    </canvas>-->
<!--    <canvas *ngIf="category.includes('volume')"-->
<!--            baseChart-->
<!--            [datasets]="volumeChartDataset"-->
<!--            [labels]="volumeChartLabels"-->
<!--            [options]="chartOptions"-->
<!--            [type]="'line'"-->
<!--    >-->
<!--    </canvas>-->
    <div class="flex flex-row space-x-4 p-2">
      <button (click)="changeCategory('income')" [ngClass]="{'ring-2': category.includes('income')}"
              class="px-6 py-2 rounded-full ring-offset-2 ring-blue-600 text-gray-100 bg-blue-600 hover:bg-blue-700 active:ring-2">
        Kelishi
      </button>
      <button (click)="changeCategory('volume')" [ngClass]="{'ring-2': category.includes('volume')}"
              class="px-6 py-2 rounded-full ring-offset-2 ring-blue-600 text-gray-100 bg-blue-600 hover:bg-blue-700 active:ring-2">
        Hajm
      </button>
    </div>
  </div>
  <!-- /Chart with buttons -->

  <!-- Year select -->
  <div class="flex overflow-y-auto">
    <table>
      <thead class="sticky top-0">
      <tr>
        <th>
          <input type="checkbox" [checked]="isYearsChecked(years)" class="w-4 h-4 mr-2 mt-2"
                 (click)="toggleYears(years)">
          Yil
        </th>
        <th>Suv kelishi, mln.m³</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let item of years" (click)="yearSelect(item.year)">
        <td
          [ngStyle]="{'background-color': getColor(item)}"
          [ngClass]="{
    'min': min?.year == item.year,
    'max': max?.year == item.year,
    'past': past?.year == item.year,
    'text-gray-200': getColor(item),
    'current': current?.year == item.year,
    }"
        >
<!--          <input-->
<!--            type="checkbox"-->
<!--            name="year"-->
<!--            [checked]="isChecked(item.year)"-->
<!--            (click)="yearSelect(item.year)">-->
          <span class="ml-2">
    {{ item.year }}
   </span>
        </td>
        <td
          [ngStyle]="{'background-color': getColor(item)}"
          [ngClass]="{
     'min': min?.year == item.year,
     'max': max?.year == item.year,
     'past': past?.year == item.year,
     'text-gray-200': getColor(item),
     'current': current?.year == item.year,
     }">
          {{ item.value | number: '.0-0' }}
        </td>
<!--        <td-->
<!--          *ngIf="isYearMatched(item.year)"-->
<!--          [ngStyle]="{'background-color': getColor(item)}"-->
<!--          [ngClass]="{-->
<!--      'min': min?.year == item.year,-->
<!--      'max': max?.year == item.year,-->
<!--      'past': past?.year == item.year,-->
<!--      'text-gray-200': getColor(item),-->
<!--      'current': current?.year == item.year,-->
<!--       }"-->
<!--        >-->
<!--          <input type="checkbox" name="year" [checked]="isChecked(item.year)" (click)="removeFromChart(item)">-->
<!--          <span class="ml-2">{{ item.year }}</span>-->
<!--        </td>-->
<!--        <td-->
<!--          *ngIf="isYearMatched(item.year)"-->
<!--          [ngStyle]="{'background-color': getColor(item)}"-->
<!--          [ngClass]="{-->
<!--        'min': min?.year == item.year,-->
<!--        'max': max?.year == item.year,-->
<!--        'past': past?.year == item.year,-->
<!--        'text-gray-200': getColor(item),-->
<!--        'current': current?.year == item.year,-->
<!--        }">-->
<!--          {{ item.value | number: '.0-0' }}-->
<!--        </td>-->
      </tr>
      </tbody>
    </table>
  </div>
  <!-- /Year select -->

  <!-- Info table -->
  <div class="flex col-span-5 overflow-y-auto max-h-80">
    <table>
      <thead class="sticky top-0">
      <tr>
        <th rowspan="2">Yillar</th>
        <th colspan="12">Oylar, mln.m³</th>
        <th rowspan="2">O'rtacha kelishi, m³/s</th>
        <th rowspan="2">Yillik kelishi, mln.m³</th>
        <th rowspan="2">O'rtacha ko'rsatkichga kelsak, %</th>
      </tr>
      <tr>
        <th>Yan.</th>
        <th>Fev.</th>
        <th>Mart</th>
        <th>Apr.</th>
        <th>May</th>
        <th>Iyun</th>
        <th>Iyul</th>
        <th>Avg.</th>
        <th>Sen.</th>
        <th>Okt.</th>
        <th>Noy.</th>
        <th>Dek.</th>
      </tr>
      </thead>
      <tbody *ngIf="avg">
      <tr
        *ngIf="startYear && endYear && avg.display"
        (click)="changeVisibility(avg.id)"
        [ngClass]="{'text-blue-600': avg.display}"
        class="text-blue-600">
        <td
          *ngIf="startYear && endYear" class="text-sm p-1">
          O'rtacha ko'p yillik
        </td>
        <td
          *ngFor="let val of avg.byMonth">
          {{ val | number: '.0-0' }}
        </td>
        <td>{{ (avg.value / mSecondsInDay / 360) | number: '.0-0' }}</td>
        <td>{{ (avg.value) | number: '.0-0' }}</td>
        <td>100</td>
      </tr>
      <tr
        *ngIf="max && max.display"
        (click)="changeVisibility(max.id)"
        [ngClass]="{'text-green-600': max.display}" class="text-green-600">
        <td class="p-1">
          Maksimal
        </td>
        <td
          *ngFor="let val of max.byMonth">
          {{ val | number: '.0-0' }}
        </td>
        <td>
          {{ (max.value / mSecondsInDay / 360) | number: '.0-0' }}
        </td>
        <td>{{ (max.value) | number: '.0-0' }}</td>
        <td>{{ (max.value * 100 / avg.value) | number: '.0-0' }}</td>
      </tr>
      <tr
        *ngIf="min && min.display"
        (click)="changeVisibility(min.id)"
        [ngClass]="{'text-rose-600': min.display}"
        class="text-rose-600">
        <td class="p-1">
          Minimal
        </td>
        <td
          *ngFor="let val of min.byMonth">
          {{ val | number: '.0-0' }}
        </td>
        <td>
          {{ (min.value / mSecondsInDay / 360) | number: '.0-0' }}
        </td>
        <td>{{ (min.value) | number: '.0-0' }}</td>
        <td>{{ (min.value * 100 / avg.value) | number: '.0-0' }}</td>
      </tr>
      <tr
        *ngIf="tenAvg && tenAvg.display"
        (click)="changeVisibility(tenAvg.id)"
        [ngClass]="{
      'text-cyan-600': tenAvg.display}"
        class="text-cyan-600">
        <td>O'rtacha 10 yil</td>
        <td
          *ngFor="let val of tenAvg.byMonth">
          {{ val | number: '.0-0' }}
        </td>
        <td>
          {{ (tenAvg.value / mSecondsInDay / 360) | number: '.0-0' }}
        </td>
        <td>
          {{ (tenAvg.value) | number: '.0-0' }}
        </td>
        <td>
          {{ (tenAvg.value * 100 / avg.value) | number: '.0-0' }}
        </td>
      </tr>
      <tr
        *ngIf="past && past.display"
        (click)="changeVisibility(past.id)"
        [ngClass]="{'text-amber-600': past.display}"
        class="text-amber-600">
        <td>O'tgan yil o'rtacha</td>
        <td *ngFor="let val of past.byMonth">{{ val | number: '.0-0' }}</td>
        <td>{{ (past.value / mSecondsInDay / 360) | number: '.0-0' }}</td>
        <td>{{ (past.value) | number: '.0-0' }}</td>
        <td>{{ (past.value * 100 / avg.value) | number: '.0-0' }}</td>
      </tr>
      <tr
        *ngIf="current && current.display"
        (click)="changeVisibility(current.id)"
        [ngClass]="{'text-purple-600': current.display}"
        class="text-purple-600">
        <td>{{ current.year }}</td>
        <td
          *ngFor="let val of current.byMonth">
          {{ val | number: '.0-0' }}
        </td>
        <td
          *ngFor="let _ of incomeChartLabels.slice(current.byMonth.length)">
        </td>
        <td>
          {{ (current.value / mSecondsInDay / 360) | number: '.0-0' }}
        </td>
        <td>
          {{ (current.value) | number: '.0-0' }}
        </td>
        <td>{{ (current.value * 100 / avg.value) | number: '.0-0' }}</td>
      </tr>
      <tr
        *ngFor="let item of selected"
        (click)="changeVisibility(item.id)"
        [ngStyle]="{'color': item.color}">
        <td>{{ item.year }}</td>
        <td
          *ngFor="let val of item.byMonth">
          {{ val | number: '.0-0' }}
        </td>
        <td>
          {{ (item.value / mSecondsInDay / 360) | number: '.0-0' }}
        </td>
        <td>
          {{ (item.value) | number: '.0-0' }}
        </td>
        <td>
          {{ (item.value * 100 / avg.value) | number: '.0-0' }}
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <!-- / Info table -->

  <!-- Additional table -->
  <div class="flex">
    <table>
      <thead
        class="sticky top-0">
      <tr>
        <th>Yil</th>
        <th>Yillik kelishi, mln.m³</th>
      </tr>
      </thead>
      <tbody *ngIf="avg">
      <tr
        *ngIf="startYear && endYear"
        (click)="changeVisibility(avg.id) "
        [ngClass]="{
         'bg-blue-600': avg.display,
         'text-gray-200': avg.display,
         'text-blue-600': !avg.display}">
        <td
          *ngIf="startYear && endYear">
          O'rtacha ko'p yillik
        </td>
        <td>{{ (avg.value) | number: '.0-0' }}</td>
      </tr>
      <tr *ngIf="tenAvg" (click)="changeVisibility(tenAvg.id)"
          [ngClass]="{
          'bg-cyan-600': tenAvg.display,
          'text-gray-200': tenAvg.display,
          'text-cyan-600': !tenAvg.display}"
          class="text-cyan-600">
        <td>O'rtacha 10 yil</td>
        <td>{{ (tenAvg.value) | number: '.0-0' }}</td>
      </tr>
      <tr
        *ngIf="max"
        (click)="changeVisibility(max.id)"
        [ngClass]="{
          'bg-green-600': max.display,
          'text-gray-200': max.display,
          'text-green-600':!max.display}">
        <td>Maksimal</td>
        <td>{{ (max.value) | number: '.0-0' }}</td>
      </tr>
      <tr
        *ngIf="min"
        (click)="changeVisibility(min.id)"
        [ngClass]="{
         'bg-red-600': min.display,
         'text-gray-200': min.display,
         'text-red-600':!min.display}">
        <td>
          Minimal
        </td>
        <td>{{ (min.value) | number: '.0-0' }}</td>
      </tr>
      </tbody>
    </table>
  </div>
  <!-- / Additional table -->
</div>
